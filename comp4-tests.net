* C:\users\krot\Desktop\study\itmo-prog\sem6\cdesign\lab1\comp4-tests.asc
V1 vdd 0 1
V2 A3 0 1
V4 B3 0 PULSE(0 1 0 10p 10p 1n 2n)
XX1 a_gr_b b_gr_a a_eq_b B0 A1 A2 A3 B0 B1 B2 B3 vdd comp4
V10 A2 0 1
V11 A1 0 1
V12 B0 0 1
V13 B2 0 1
V15 A0 0 1
V16 B1 0 1

* block symbol definitions
.subckt comp4 A_GR_B B_GR_A A_EQ_B A0 A1 A2 A3 B0 B1 B2 B3 VDD
XX2 a1_eq_b1 N011 N010 vdd nand
XX3 a_greater_b_1bit N010 a_greater_b_2bit vdd nand
XX5 B0 B0 not_b0 vdd nand
XX7 A0 A0 not_a0 vdd nand
XX9 N001 N001 a0_eq_b0 vdd nand
XX10 A0 B0 N001 vdd xor
XX11 A0 not_b0 N012 vdd nand
XX12 N012 N012 N011 vdd nand
XX14 N002 N002 a1_eq_b1 vdd nand
XX15 A1 B1 N002 vdd xor
XX17 B1 B1 not_b1 vdd nand
XX19 A1 A1 not_a1 vdd nand
XX1 B2 B2 not_b2 vdd nand
XX4 A2 A2 not_a2 vdd nand
XX6 N003 N003 a2_eq_b2 vdd nand
XX8 A2 B2 N003 vdd xor
XX13 A2 not_b2 N013 vdd nand
XX16 a2_eq_b2 a_greater_b_2bit N014 vdd nand
XX18 N013 N014 a_greater_b_3bit vdd nand
XX21 A3 not_b3 N015 vdd nand
XX22 a3_eq_b3 a_greater_b_3bit N016 vdd nand
XX23 N015 N016 A_GR_B vdd nand
XX24 N004 N004 a3_eq_b3 vdd nand
XX25 A3 B3 N004 vdd xor
XX26 B3 B3 not_b3 vdd nand
XX27 A3 A3 not_a3 vdd nand
XX28 A1 not_b1 a_greater_b_1bit vdd nand
XX20 a0_eq_b0 a1_eq_b1 N005 vdd nand
XX29 a2_eq_b2 a3_eq_b3 N009 vdd nand
XX30 N005 N005 N006 vdd nand
XX31 N009 N009 N008 vdd nand
XX32 N006 N008 N007 vdd nand
XX33 N007 N007 A_EQ_B vdd nand
XX34 A_GR_B a_eq_b N017 vdd xor
XX35 N017 N017 B_GR_A vdd nand
.ends comp4

.subckt nand VIN1 VIN2 VOUT VDD
M1 VDD VIN1 VOUT VDD PMOS l=90n w=400n
M2 VDD VIN2 VOUT VDD PMOS l=90n w=400n
M3 VOUT VIN1 N001 0 NMOS l=90n w=200n
M4 N001 VIN2 0 0 NMOS l=90n w=200n
.ends nand

.subckt xor A B VOUT VDD
XX1 N001 N003 VOUT vdd nand
XX2 N002 B N003 vdd nand
XX3 A N002 N001 vdd nand
XX4 A B N002 vdd nand
.ends xor

.model NMOS NMOS
.model PMOS PMOS
.lib C:\users\krot\Documents\LTspiceXVII\lib\cmp\standard.mos
.tran 0 2n 0n
.backanno
.end
